<script type="text/ng-template" id="folder-structure.html">
    <p class="file-tree__item-name"
        ng-if="item.name && !item.editingName"
        ng-dblclick="fileTree.startEditingName(item)">
        {{ item.name }}
    </p>
    <input class="file-tree__item-rename"
        ng-if="item.editingName"
        ng-model="item.name"
        ng-blur="fileTree.editName(item)"
        ng-keypress="fileTree.renameOnEnter($event, item)"
        tractor-give-focus
        focus-on="item.editingName">
    </input>

    <ul class="file-tree__file-list">
        <li class="file-tree__file-list-item file-tree__file-list-item--new-directory">
            <tractor-action class="file-tree__add-directory"
                model="fileTree"
                action="Add directory"
                argument="item || fileTree.folderStructure">
            </tractor-action>
        </li>

        <li class="file-tree__file-list-item file-tree__file-list-item--directory"
            ng-repeat="item in (item || fileTree.folderStructure).directories"
            ng-include="'folder-structure.html'"
            tractor-drop-file
            on-drop="fileTree.moveFile"
            drop-directory="item">
        </li>

        <li class="file-tree__file-list-item"
            ng-repeat="item in (item || fileTree.folderStructure).files"
            tractor-drag-file>
            <p class="file-tree__item-name"
                ng-if="!item.editingName"
                ng-click="fileTree.openFile(item)"
                ng-dblclick="fileTree.startEditingName(item)">
                {{ item.name }}
            </p>
            <input class="file-tree__item-rename"
                ng-if="item.editingName"
                ng-model="item.name"
                ng-blur="fileTree.editName(item)"
                ng-keypress="fileTree.renameOnEnter($event, item)"
                tractor-give-focus
                focus-on="item.editingName">
            </input>
        </li>
    </ul>
</script>

<section class="file-tree__container">
    <h2 class="file-tree__header">
        {{ fileTree.headerName }} files:
    </h2>
    <div class="file-tree file-tree--javascript"
        ng-include="'folder-structure.html'">
    </div>
</section>
<div class="file-tree__resize-handle"></div>
